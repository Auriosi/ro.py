from ro_py import errors
import requests

endpoint = "https://thumbnails.roblox.com/"

PlaceHolder = "PlaceHolder"
AutoGenerated = "AutoGenerated"
ForceAutoGenerated = "ForceAutoGenerated"

size_50x50 = "50x50"
size_128x128 = "128x128"
size_150x150 = "150x150"
size_256x256 = "256x256"
size_420x420 = "420x420"
size_512x512 = "512x512"
format_png = "Png"
format_jpg = "Jpeg"
format_jpeg = "Jpeg"


def get_group_icon(group_id, size=size_150x150, format=format_png, is_circular=False):
    """
    Gets a game's icon.
    :param group_id: The group's ID.
    :param size: The thumbnail size, formatted widthxheight.
    :param format: The thumbnail format
    :param is_circular: The circle thumbnail output parameter.
    :return: Image URL
    """
    group_icon_req = requests.get(
        url=endpoint + "v1/groups/icons",
        params={
            "groupIds": str(group_id),
            "size": size,
            "format": format,
            "isCircular": is_circular
        }
    )
    group_icon = group_icon_req.json()["data"][0]["imageUrl"]
    return group_icon


def get_game_icon(game_id, return_policy=ForceAutoGenerated, size=size_256x256, format=format_png, is_circular=False):
    """
    Gets a game's icon.
    :param game_id: The game's UniverseID.
    :param return_policy: Optional policy to use in selecting game icon to return.
    :param size: The thumbnail size, formatted widthxheight.
    :param format: The thumbnail format
    :param is_circular: The circle thumbnail output parameter.
    :return: Image URL
    """
    game_icon_req = requests.get(
        url=endpoint + "v1/games/icons",
        params={
            "universeIds": str(game_id),
            "returnPolicy": return_policy,
            "size": size,
            "format": format,
            "isCircular": is_circular
        }
    )
    game_icon = game_icon_req.json()["data"][0]["imageUrl"]
    return game_icon
